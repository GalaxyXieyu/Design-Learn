---
mode: plan
cwd: /Volumes/DATABASE/code/mcp/Design-Learn
task: 基于首版 PRD 制定 Design-Learn v2.0 技术执行计划
complexity: complex
planning_method: builtin
created_at: 2025-12-29T13:27:07+08:00
---

# Plan: Design-Learn v2.0 技术执行计划

🎯 任务概述
基于首版 PRD，落地“统一服务 + 轻量客户端”的整体架构与交付节奏。计划覆盖核心服务、数据层、MCP 协议、Chrome/VSCode 客户端协作与验证闭环，保证可追踪、可迭代。

📋 执行计划
1. 明确范围与里程碑：将 PRD 目标拆分为 MVP/迭代交付清单，确认成功指标与依赖，输出阶段性验收口径。
2. 现有实现盘点与迁移策略：梳理 chrome-extension、vscode-extension、scripts 的可复用模块与需淘汰能力，形成迁移清单与分支策略。
3. 核心服务骨架落地：搭建单进程服务入口与路由框架，接入 REST/WS/MCP 基础链路与健康检查，奠定统一入口。
4. 数据层与存储格式实施：按 PRD 数据模型与目录结构实现 SQLite + 文件存储抽象，完成 Design/Version/Component/Rules 的 CRUD 与索引。
5. 提取与分析流水线：集成 Playwright 抓取与浏览器插件导入路径，统一任务队列与进度推送，形成端到端提取闭环。
6. MCP 协议与 API 契约：实现 tools/resources/prompts 的注册与 SSE 传输，制定鉴权/版本策略，确保 Cursor/Claude 可用。
7. 客户端改造与联调：Chrome 插件只负责采集与上报，VSCode 扩展提供管理 UI 与内置服务启动，完成配对与同步流程。
8. 测试与性能验证：补齐服务单元测试、接口集成测试与端到端链路验证，建立关键性能指标与回归基线。
9. 文档与发布准备：更新开发与运维文档、配置示例与数据路径说明，给出回滚/降级策略与发布清单。

⚠️ 风险与注意事项
- 多端数据迁移与一致性风险：需要避免历史数据孤岛造成的丢失或重复。
- MCP 协议兼容性风险：不同 AI 客户端对 SSE/MCP 行为差异可能导致接入失败。
- 抓取与分析依赖风险：Playwright 与 AI 分析链路的外部依赖可能影响稳定性与性能。

📎 参考
- `首版 PRD.md:60`
- `首版 PRD.md:286`
- `首版 PRD.md:435`
