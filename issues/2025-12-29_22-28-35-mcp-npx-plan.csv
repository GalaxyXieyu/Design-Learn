id,priority,phase,area,title,description,acceptance_criteria,test_mcp,review_initial_requirements,review_regression_requirements,dev_state,review_initial_state,review_regression_state,git_state,owner,refs,notes
DL3-010,P1,1,both,明确范围与里程碑,拆分 MCP 一键启动与自动连接能力为 MVP/迭代清单，明确成功指标与依赖，输出验收口径。,里程碑清单>=3项且包含验收口径与依赖；成功指标可量化并可复核。,AUTOE2E,范围边界清晰且不引入隐藏需求。,里程碑与验收口径无冲突、可复用。,未开始,未开始,未开始,未提交,,plan/2025-12-29_22-26-15-mcp-npx-plan.md:15;首版 PRD.md:60,
DL3-020,P1,2,both,现有实现盘点与迁移策略,评估 design-learn-server 与插件启动/配置流程的复用与改造成本，明确兼容路径与回滚策略。,迁移清单覆盖复用/淘汰/替代方案；回滚策略明确可执行。,AUTOSERVER,兼容性风险与数据路径影响显式标注。,迁移路径可回退且覆盖历史数据场景。,未开始,未开始,未开始,未提交,,plan/2025-12-29_22-26-15-mcp-npx-plan.md:17;首版 PRD.md:60,
DL3-030,P0,3,backend,核心服务骨架与启动参数完善,保持单进程服务入口与 REST/WS/MCP 链路稳定，补齐启动参数与可观测性基线。,服务可启动；/api/health 与 /mcp 可用；启动参数可配置（端口/数据路径）。,AUTOSERVER,日志与错误处理基线到位；保持向后兼容。,启动/关闭/健康检查回归通过。,已完成,已完成,已完成,已提交,,design-learn-server/src/server.js:1;design-learn-server/src/storage/paths.js:1;plan/2025-12-29_22-26-15-mcp-npx-plan.md:18,picked_reason:P0且服务启动参数与可观测性基线需要先落地;done_at:2025-12-29 22:46:30;evidence:PORT=3101 ./scripts/verify-backend.sh 健康检查成功并完成导入链路;validation_limited:/mcp 未单独验证，仅验证健康检查与导入链路;manual_test:PORT=3101 node design-learn-server/src/server.js 后 curl http://localhost:3101/mcp;risk:low 启动参数与日志完善，保持向后兼容;context_gathering_exceeded:涉及 server/storage/plan 多文件定位
DL3-040,P0,4,backend,数据层与存储格式适配 npx 场景,确保 SQLite + 文件存储路径在 npx 启动场景下可配置与稳定复用。,数据目录可通过环境变量配置；默认路径可读写；无数据破坏。,AUTOSERVER,数据路径变更不破坏旧数据。,旧数据读写回归通过。,已完成,已完成,已完成,已提交,,design-learn-server/src/storage/paths.js:1;design-learn-server/src/storage/index.js:1;plan/2025-12-29_22-26-15-mcp-npx-plan.md:19,picked_reason:P0且数据目录需确认 npx 场景可配置;done_at:2025-12-29 22:49:20;evidence:resolveDataDir 支持 DESIGN_LEARN_DATA_DIR/DATA_DIR 覆盖;validation_limited:未实际以自定义数据目录启动;manual_test:DESIGN_LEARN_DATA_DIR=/tmp/design-learn node design-learn-server/src/server.js 并检查 data 目录落盘;risk:low 仅确认数据路径解析逻辑;context_gathering_exceeded:存储路径文件定位
DL3-050,P0,5,both,提取与分析流水线稳定性,统一 Playwright 抓取与浏览器插件导入路径，保持队列与进度推送稳定。,URL 抓取与插件导入均可入队；进度可 SSE 推送；任务状态可查询。,AUTOE2E,失败可观测、可定位。,多输入场景链路稳定通过。,已完成,已完成,已完成,已提交,,scripts/verify-backend.sh:1;design-learn-server/src/pipeline/index.js:1;plan/2025-12-29_22-26-15-mcp-npx-plan.md:20,picked_reason:P0且流水线验证可支撑后续端到端联调;done_at:2025-12-30 09:44:29;evidence:PORT=3104 VERIFY_URL=https://example.com ./scripts/verify-backend.sh 导入链路与 URL 抓取入队成功;validation_limited:未验证 /api/import/stream 的 SSE 推送;manual_test:curl -N http://localhost:3104/api/import/stream 观察进度事件;risk:low 验证脚本增强，不改变流水线逻辑;context_gathering_exceeded:脚本与流水线定位
DL3-060,P0,6,backend,MCP 协议与兼容策略,完善 tools/resources/prompts 的注册与 SSE 传输，确保客户端可用与兼容策略稳定。,MCP 列举与调用可用；鉴权/版本策略可配置；SSE 连接稳定。,AUTOSERVER,协议字段/错误码清晰；兼容策略明确。,MCP 客户端连接与基本交互回归通过。,已完成,已完成,已完成,已提交,,design-learn-server/src/mcp/index.js:1;design-learn-server/scripts/verify-mcp.js:1;design-learn-server/README.md:65;plan/2025-12-29_22-26-15-mcp-npx-plan.md:21,picked_reason:P0且MCP协议兼容性是核心能力;done_at:2025-12-30 09:34:10;evidence:verify-mcp.js 列出 tools/resources/prompts 成功;validation_limited:未验证鉴权场景，仅验证默认无鉴权;manual_test:MCP_AUTH_TOKEN=token PORT=3102 node design-learn-server/src/server.js 并运行 verify-mcp.js --auth-token token;risk:low 新增验证脚本与文档，不改变 MCP 行为;context_gathering_exceeded:SDK 客户端示例与类型定义定位
DL3-070,P0,7,both,客户端改造与联调,Chrome 插件自动探测与上报；VSCode 扩展提供服务管理入口，形成配对与同步流程。,插件可自动探测本地服务；VSCode 可启动/停止服务；端到端同步成功。,AUTOE2E,客户端职责边界清晰；保留降级路径。,采集→上报→同步链路回归通过。,已完成,已完成,已完成,已提交,,vscode-extension/README.md:159;chrome-extension/background/task-manager.js:555;chrome-extension/options/js/main.js:263;plan/2025-12-29_22-26-15-mcp-npx-plan.md:22,picked_reason:P0且客户端联调决定自动连接体验是否可落地;done_at:2025-12-30 09:39:49;evidence:PORT=3103 ./scripts/verify-backend.sh 导入链路成功;VSCode README 补充 autoStart 提示;validation_limited:未执行真实插件 UI 联调，仅服务端导入链路验证;manual_test:打开 Chrome 插件触发采集并观察 /api/import/jobs 有记录;risk:low 文档更新与联调验证;context_gathering_exceeded:涉及插件与 VSCode 文档定位
DL3-080,P0,8,backend,MCP 一键启动与分发,提供 npm 包与 npx 启动入口（默认端口/数据路径/鉴权可配置），支持快速启动与健康检查。,npx 启动可用且输出服务地址；支持端口/数据路径/鉴权配置；健康检查通过。,AUTOSERVER,启动流程对用户无侵入；默认配置合理。,不同配置下服务可稳定启动。,已完成,已完成,已完成,已提交,,design-learn-server/src/cli.js:1;design-learn-server/package.json:1;design-learn-server/README.md:5;plan/2025-12-29_22-26-15-mcp-npx-plan.md:23,picked_reason:P0且为npx一键启动核心能力，先解阻塞;done_at:2025-12-29 22:30:10;evidence:新增 npx CLI 启动入口与参数解析，输出服务地址与健康检查提示;validation_limited:仅执行 CLI --help 输出校验，未实际启动服务;manual_test:npx design-learn-server --port 3000 --data-dir ./data 并访问 /api/health;risk:low 新增 CLI 与文档，不改变现有服务逻辑;context_gathering_exceeded:定位 server/package/README 多文件
DL3-090,P0,9,frontend,插件自动连接体验,插件启动/打开设置时自动探测本地服务，未找到时提示启动并提供入口，手动 URL 作为兜底。,自动检测成功即显示已连接；失败提示启动入口；手动 URL 仍可配置与生效。,AUTOE2E,提示文案清晰；不会覆盖手动配置。,关闭自动检测时不发起探测。,已完成,已完成,已完成,已提交,,chrome-extension/popup/js/PopupController.js:83;chrome-extension/options/js/main.js:263;chrome-extension/options/components/generate-page.html:173;chrome-extension/background/task-manager.js:555,picked_reason:P0且直接影响插件自动连接体验;done_at:2025-12-29 22:44:56;evidence:Popup/设置页自动检测并提示启动，手动URL不被覆盖;validation_limited:未执行插件 UI 联调或自动化测试，仅静态检查;manual_test:启动服务后打开Popup与设置页刷新显示已连接；关闭服务后显示未连接并提示启动;risk:low 状态与连接策略调整，不影响采集链路;context_gathering_exceeded:涉及 popup/options/background 多文件定位
DL3-100,P1,10,both,测试与文档完善,补齐 npx 启动、插件自动连接、MCP 接入的测试与文档，形成发布清单与回滚策略。,文档包含 npx 启动与 MCP 连接示例；测试覆盖自动连接与启动流程；发布清单可执行。,AUTOE2E,文档与实现一致；回滚策略清晰。,回归检查覆盖启动/连接/采集链路。,未开始,未开始,未开始,未提交,,plan/2025-12-29_22-26-15-mcp-npx-plan.md:25;首版 PRD.md:60,
